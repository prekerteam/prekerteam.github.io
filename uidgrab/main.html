
<div class="container-fluid" style="width:100%;padding-top:20px;max-width:500px;">

	<div class="panel panel-default  bmd-card">

		<div class="panel-body bmd-card-image">

			<!-- Nav tabs -->
			<ul class="nav nav-tabs bmd-nav-tabs bmd-nav-tabs-success " style="">

				<li role="presentation" class="active" style="width:25%"><a href="#fren" aria-controls="fren" role="tab"
						data-toggle="tab" class="bmd-ripple bmd-ripple-tab">Grab Friend</a></li>
				<li role="presentation" style="width:25%"><a href="#group" aria-controls="group" role="tab"
						data-toggle="tab" class="bmd-ripple bmd-ripple-tab">Grab Group</a></li>
				<li role="presentation" style="width:25%"><a href="#like" aria-controls="like" role="tab"
						data-toggle="tab" class="bmd-ripple bmd-ripple-tab">Grab Likes</a></li>
				<li role="presentation" style="width:25%"><a href="#filter" aria-controls="filter" role="tab"
						data-toggle="tab" class="bmd-ripple bmd-ripple-tab">Filter UID</a></li>
			</ul>

			<!-- Tab panes -->
			<div class="tab-content bmd-card-caption" style="padding: 0 15px;;">

				<br>
				<form id="uidfrend" method="post" action="grab.php" class="form-horizontal">
					<div class="form-group text-info">
						<label class="col-lg-2 control-label bmd-control-label">Token</label>
						<div class="col-lg-10">
							<div class="bmd-field-group ">
								<textarea rows="3" class="bmd-textarea" name="fb_token" id="fb_token" class="bmd-input"
									required=""></textarea>
								<span class="bmd-bar text-danger"></span>
								<label class="bmd-label">Input FB token (perbaris, untuk diroling)</label>
								<span class="bmd-field-feedback"></span>
							</div>
						</div>
					</div>

					<div class="form-group">
						<label class="col-lg-2 control-label">Gender</label>
						<div class="col-lg-10">
							<div class="radio bmd-radio bmd-radio-danger">
								<label>
									<input class="bmd-radio-input bmd-ripple gender" type="radio" name="gender"
										value="all" checked="true">
									All &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<span class="bmd-radio-check"></span>
								</label>
								<label>
									<input class="bmd-radio-input bmd-ripple gender" type="radio" name="gender"
										value="male">
									Male &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
									<span class="bmd-radio-check"></span>
								</label>
								<label>
									<input class="bmd-radio-input bmd-ripple gender" type="radio" name="gender"
										value="female">
									Female
									<span class="bmd-radio-check"></span>
								</label>
							</div>
						</div>
					</div>
					<div class="form-group form-country">
						<label class="col-lg-2 control-label ">Country</label>
						<div class="col-lg-10">
							<input type="text" name="country" id="country" data-access_multi_select="true"
								style="height: auto;" placeholder="Select a Country">
							<!-- <select name="country" multiple="multiple" id="country" style="width:100%;border: 1px solid #f0f0f0;padding:2px 5px;" class="bmd-ripple">
				<option value="semua">Semua</option>
			</select> -->

						</div>
					</div>
					<div class="form-group text-info">
						<label class="col-lg-2 control-label bmd-control-label">UIDs</label>
						<div class="col-lg-10">
							<div class="bmd-field-group text-warning">
								<textarea rows="10" class="bmd-textarea" required="" onClick="this.select()" name="uids"
									style="width:100%;height:20%;min-height:80px;max-height:200px"></textarea>
								<span class="bmd-bar"></span>
								<label class="bmd-label text-warning">ex: 10000099999999</label>
								<span class="bmd-field-feedback text-warning">
									UID/username perline
								</span>
							</div>
						</div>
					</div>
					<input type="hidden" id="type" value="">
					<input type="hidden" id="run" value="0">
				</form>


				<div role="tabpanel" class="tab-pane active" id="fren">

					<div class="form-group ">
						<label class="col-lg-2 control-label bmd-control-label"></label>
						<div class="">
							<a type="button" class="btn btn-sm btn-success btn-block bmd-ripple " data-type="friends"
								value="grab" name="grab" style="font-size:16px" data-toggle="modal"
								data-target="#ngegrab" data-backdrop="static" data-keyboard="false"
								data-component="lanjut"><b>GRAB from FRIENDS</b></a>
						</div>
					</div>
					<br>
				</div>
				<div role="tabpanel" class="tab-pane" id="group">
					<div class="form-group ">
						<label class="col-lg-2 control-label bmd-control-label"></label>
						<div class="">
							<a type="button" class="btn btn-sm btn-success btn-block bmd-ripple " data-type="members"
								value="grab" name="grab" style="font-size:16px" data-toggle="modal"
								data-target="#ngegrab" data-backdrop="static" data-keyboard="false"
								data-component="lanjut"><b>GRAB from GROUP</b></a>
						</div>
					</div>
					<br>
				</div>
				<div role="tabpanel" class="tab-pane" id="like">
					<div class="form-group ">
						<label class="col-lg-2 control-label bmd-control-label"></label>
						<div class="">
							<a type="button" class="btn btn-sm btn-success btn-block bmd-ripple " data-type="likes"
								value="grab" name="grab" style="font-size:16px" data-toggle="modal"
								data-target="#ngegrab" data-backdrop="static" data-keyboard="false"
								data-component="lanjut"><b>GRAB from LIKES</b></a>
						</div>
					</div>
					<br>
				</div>
				<div role="tabpanel" class="tab-pane" id="filter">
					<div class="form-group ">
						<label class="col-lg-2 control-label bmd-control-label"></label>
						<div class="">
							<a type="button" class="btn btn-sm btn-success btn-block bmd-ripple " data-type="filter"
								value="grab" name="grab" style="font-size:16px" data-toggle="modal"
								data-target="#ngegrab" data-backdrop="static" data-keyboard="false"
								data-component="lanjut"><b>Start UID FILTER</b></a>
						</div>
					</div>
					<br>
				</div>
				<div role="tabpanel" class="tab-pane" id="messages">...</div>
				<div role="tabpanel" class="tab-pane" id="settings">...</div>
			</div>

		</div>
	</div>
</div>

<!-- Proses -->
<div class="modal fade" id="ngegrab">
	<div class="modal-dialog bmd-modal-dialog">
		<div class="modal-content bmd-border-success">
			<div class="modal-header bmd-bg-success">
				<h4 class="modal-title bmd-text-primary-70">Grab Proses</h4>
			</div>
			<div class="modal-body">
				<div id="component">
					<div class="bmd-spinner bmd-spinner-default bmd-spinner-lg tunggu"
						style="margin: 50px auto;width: 100%;"> <svg viewBox="0 0 50 50">
							<circle cx="25" cy="25" r="20"></circle>
						</svg></div>
				</div>
			</div>
			<div class="modal-footer bmd-border-green-100">
				<span style="margin-right:20px">Jika di close akan mulai dari awal</span>
				<button type="button" class="btn btn-danger bmd-ripple bmd-ink-grey-400 metu"
					data-dismiss="modal">Close</button>
				<button type="button" class="btn btn-primary bmd-ripple save">Download</button>
			</div>
		</div>
	</div>
</div>
<script>
	var countries = {
		AF: 'Afghanistan',
		AX: 'Aland Islands',
		AL: 'Albania',
		DZ: 'Algeria',
		AS: 'American Samoa',
		AD: 'Andorra',
		AO: 'Angola',
		AI: 'Anguilla',
		AQ: 'Antarctica',
		AG: 'Antigua And Barbuda',
		AR: 'Argentina',
		AM: 'Armenia',
		AW: 'Aruba',
		AU: 'Australia',
		AT: 'Austria',
		AZ: 'Azerbaijan',
		BS: 'Bahamas',
		BH: 'Bahrain',
		BD: 'Bangladesh',
		BB: 'Barbados',
		BY: 'Belarus',
		BE: 'Belgium',
		BZ: 'Belize',
		BJ: 'Benin',
		BM: 'Bermuda',
		BT: 'Bhutan',
		BO: 'Bolivia',
		BA: 'Bosnia And Herzegovina',
		BW: 'Botswana',
		BV: 'Bouvet Island',
		BR: 'Brazil',
		IO: 'British Indian Ocean Territory',
		BN: 'Brunei Darussalam',
		BG: 'Bulgaria',
		BF: 'Burkina Faso',
		BI: 'Burundi',
		KH: 'Cambodia',
		CM: 'Cameroon',
		CA: 'Canada',
		CV: 'Cape Verde',
		KY: 'Cayman Islands',
		CF: 'Central African Republic',
		TD: 'Chad',
		CL: 'Chile',
		CN: 'China',
		CX: 'Christmas Island',
		CC: 'Cocos (Keeling) Islands',
		CO: 'Colombia',
		KM: 'Comoros',
		CG: 'Congo',
		CD: 'Congo, Democratic Republic',
		CK: 'Cook Islands',
		CR: 'Costa Rica',
		CI: 'Cote D\'Ivoire',
		HR: 'Croatia',
		CU: 'Cuba',
		CY: 'Cyprus',
		CZ: 'Czech Republic',
		DK: 'Denmark',
		DJ: 'Djibouti',
		DM: 'Dominica',
		DO: 'Dominican Republic',
		EC: 'Ecuador',
		EG: 'Egypt',
		SV: 'El Salvador',
		GQ: 'Equatorial Guinea',
		ER: 'Eritrea',
		EE: 'Estonia',
		ET: 'Ethiopia',
		FK: 'Falkland Islands (Malvinas)',
		FO: 'Faroe Islands',
		FJ: 'Fiji',
		FI: 'Finland',
		FR: 'France',
		GF: 'French Guiana',
		PF: 'French Polynesia',
		TF: 'French Southern Territories',
		GA: 'Gabon',
		GM: 'Gambia',
		GE: 'Georgia',
		DE: 'Germany',
		GH: 'Ghana',
		GI: 'Gibraltar',
		GR: 'Greece',
		GL: 'Greenland',
		GD: 'Grenada',
		GP: 'Guadeloupe',
		GU: 'Guam',
		GT: 'Guatemala',
		GG: 'Guernsey',
		GN: 'Guinea',
		GW: 'Guinea-Bissau',
		GY: 'Guyana',
		HT: 'Haiti',
		HM: 'Heard Island & Mcdonald Islands',
		VA: 'Holy See (Vatican City State)',
		HN: 'Honduras',
		HK: 'Hong Kong',
		HU: 'Hungary',
		IS: 'Iceland',
		IN: 'India',
		ID: 'Indonesia',
		IR: 'Iran, Islamic Republic Of',
		IQ: 'Iraq',
		IE: 'Ireland',
		IM: 'Isle Of Man',
		IL: 'Israel',
		IT: 'Italy',
		JM: 'Jamaica',
		JP: 'Japan',
		JE: 'Jersey',
		JO: 'Jordan',
		KZ: 'Kazakhstan',
		KE: 'Kenya',
		KI: 'Kiribati',
		KR: 'Korea',
		KW: 'Kuwait',
		KG: 'Kyrgyzstan',
		LA: 'Lao People\'s Democratic Republic',
		LV: 'Latvia',
		LB: 'Lebanon',
		LS: 'Lesotho',
		LR: 'Liberia',
		LY: 'Libyan Arab Jamahiriya',
		LI: 'Liechtenstein',
		LT: 'Lithuania',
		LU: 'Luxembourg',
		MO: 'Macao',
		MK: 'Macedonia',
		MG: 'Madagascar',
		MW: 'Malawi',
		MY: 'Malaysia',
		MV: 'Maldives',
		ML: 'Mali',
		MT: 'Malta',
		MH: 'Marshall Islands',
		MQ: 'Martinique',
		MR: 'Mauritania',
		MU: 'Mauritius',
		YT: 'Mayotte',
		MX: 'Mexico',
		FM: 'Micronesia, Federated States Of',
		MD: 'Moldova',
		MC: 'Monaco',
		MN: 'Mongolia',
		ME: 'Montenegro',
		MS: 'Montserrat',
		MA: 'Morocco',
		MZ: 'Mozambique',
		MM: 'Myanmar',
		NA: 'Namibia',
		NR: 'Nauru',
		NP: 'Nepal',
		NL: 'Netherlands',
		AN: 'Netherlands Antilles',
		NC: 'New Caledonia',
		NZ: 'New Zealand',
		NI: 'Nicaragua',
		NE: 'Niger',
		NG: 'Nigeria',
		NU: 'Niue',
		NF: 'Norfolk Island',
		MP: 'Northern Mariana Islands',
		NO: 'Norway',
		OM: 'Oman',
		PK: 'Pakistan',
		PW: 'Palau',
		PS: 'Palestinian Territory, Occupied',
		PA: 'Panama',
		PG: 'Papua New Guinea',
		PY: 'Paraguay',
		PE: 'Peru',
		PH: 'Philippines',
		PN: 'Pitcairn',
		PL: 'Poland',
		PT: 'Portugal',
		PR: 'Puerto Rico',
		QA: 'Qatar',
		RE: 'Reunion',
		RO: 'Romania',
		RU: 'Russian Federation',
		RW: 'Rwanda',
		BL: 'Saint Barthelemy',
		SH: 'Saint Helena',
		KN: 'Saint Kitts And Nevis',
		LC: 'Saint Lucia',
		MF: 'Saint Martin',
		PM: 'Saint Pierre And Miquelon',
		VC: 'Saint Vincent And Grenadines',
		WS: 'Samoa',
		SM: 'San Marino',
		ST: 'Sao Tome And Principe',
		SA: 'Saudi Arabia',
		SN: 'Senegal',
		RS: 'Serbia',
		SC: 'Seychelles',
		SL: 'Sierra Leone',
		SG: 'Singapore',
		SK: 'Slovakia',
		SI: 'Slovenia',
		SB: 'Solomon Islands',
		SO: 'Somalia',
		ZA: 'South Africa',
		GS: 'South Georgia And Sandwich Isl.',
		ES: 'Spain',
		LK: 'Sri Lanka',
		SD: 'Sudan',
		SR: 'Suriname',
		SJ: 'Svalbard And Jan Mayen',
		SZ: 'Swaziland',
		SE: 'Sweden',
		CH: 'Switzerland',
		SY: 'Syrian Arab Republic',
		TW: 'Taiwan',
		TJ: 'Tajikistan',
		TZ: 'Tanzania',
		TH: 'Thailand',
		TL: 'Timor-Leste',
		TG: 'Togo',
		TK: 'Tokelau',
		TO: 'Tonga',
		TT: 'Trinidad And Tobago',
		TN: 'Tunisia',
		TR: 'Turkey',
		TM: 'Turkmenistan',
		TC: 'Turks And Caicos Islands',
		TV: 'Tuvalu',
		UG: 'Uganda',
		UA: 'Ukraine',
		AE: 'United Arab Emirates',
		GB: 'United Kingdom',
		US: 'United States',
		UM: 'United States Outlying Islands',
		UY: 'Uruguay',
		UZ: 'Uzbekistan',
		VU: 'Vanuatu',
		VE: 'Venezuela',
		VN: 'Viet Nam',
		VG: 'Virgin Islands, British',
		VI: 'Virgin Islands, U.S.',
		WF: 'Wallis And Futuna',
		EH: 'Western Sahara',
		YE: 'Yemen',
		ZM: 'Zambia',
		ZW: 'Zimbabwe'
	};
	var usstates = {
		AL: 'Alabama',
		AK: 'Alaska',
		AZ: 'Arizona',
		AR: 'Arkansas',
		CA: 'California',
		CO: 'Colorado',
		CT: 'Connecticut',
		DE: 'Delaware',
		DC: 'District of Columbia',
		FL: 'Florida',
		GA: 'Georgia',
		HI: 'Hawaii',
		ID: 'Idaho',
		IL: 'Illinois',
		IN: 'Indiana',
		IA: 'Iowa',
		KS: 'Kansas',
		KY: 'Kentucky',
		LA: 'Louisiana',
		ME: 'Maine',
		MD: 'Maryland',
		MA: 'Massachusetts',
		MI: 'Michigan',
		MN: 'Minnesota',
		MS: 'Mississippi',
		MO: 'Missouri',
		MT: 'Montana',
		NE: 'Nebraska',
		NV: 'Nevada',
		NH: 'New Hampshire',
		NJ: 'New Jersey',
		NM: 'New Mexico',
		NY: 'New York',
		NC: 'North Carolina',
		ND: 'North Dakota',
		OH: 'Ohio',
		OK: 'Oklahoma',
		OR: 'Oregon',
		PA: 'Pennsylvania',
		RI: 'Rhode Island',
		SC: 'South Carolina',
		SD: 'South Dakota',
		TN: 'Tennessee',
		TX: 'Texas',
		UT: 'Utah',
		VT: 'Vermont',
		VA: 'Virginia',
		WA: 'Washington',
		WV: 'West Virginia',
		WI: 'Wisconsin',
		WY: 'Wyoming'
	};
	var states = [];
	for (var key in usstates) {
		states.push(usstates[key]);
	}

	var selectcountry = [];

	$(document).ready(function () {
		var queries = {};
		var negaradefault = ['US', 'CA', 'GB', 'FR', 'DE', 'JP', 'AU', 'AT', 'NO', 'SE', 'IT'];
		var genderdefault = 'all';
		var tokendefault = '';
		if (document.location.search.substr(1).split('&').length > 0 && document.location.search.substr(1).split(
				'&')[0] != "") {
			$.each(document.location.search.substr(1).split('&'), function (c, q) {
				var i = q.split('=');
				queries[i[0].toString()] = i[1].toString();
			});
			if (queries.country !== undefined)
				negaradefault = decodeURIComponent(queries.country);
			if (queries.gender !== undefined)
				genderdefault = queries.gender;
			if (queries.access_token !== undefined)
				tokendefault = queries.access_token;

			// console.log(negaradefault);
		}
		// console.log(genderdefault);

		$('input:radio[name="gender"]').filter('[value="' + genderdefault + '"]').attr('checked', true);
		$("#fb_token").val(decodeURIComponent(tokendefault));

		// console.log(queries);

		//$.getScript( "src/prettify.js");
		$.getScript("src/main.min.js");
		// $.each(countries, function (i, item) {
		// 	$('#country').append($('<option>', {
		// 		value: i,
		// 		text: item
		// 	}));
		// });
		// $('#country').multiselect({
		// 	enableClickableOptGroups: true,
		// 	enableCollapsibleOptGroups: true,
		// 	enableFiltering: true,
		// 	includeSelectAllOption: true,
		// 	maxHeight: 200
		// });

		// Country
		var items = [
			// {value: 1, text: 'United Arab Emirates'},
			// {value: 2, text: 'Saudi Arabia'},
			// {value: 3, text: 'Israel'},
			// {value: 4, text: 'India'},
			// {value: 5, text: 'Japan'},
			// {value: 6, text: 'France'},
			// {value: 7, text: 'Germany'},
			// {value: 8, text: 'United Kingdom'},
			// {value: 9, text: 'China'},
			// {value: 10, text: 'Russia'},
			// {value: 11, text: 'United States'},
			// {value: 12, text: 'Switzerland'},
			// {value: 13, text: 'Canada'},
			// {value: 14, text: 'Sweden'},
			// {value: 15, text: 'Australia'}

		];

		$.each(countries, function (i, item) {
			items.push({
				value: i,
				text: item
			})
			// $('#country').append($('<option>', {
			// 	value: i,
			// 	text: item
			// }));
		});

		// Set a default values in list

		var select = $('[data-access_multi_select="true"]').check_multi_select({
			multi_select: true,
			items: items,
			defaults: negaradefault,
			rtl: false
		});
		// console.log(select.check_multi_select('fetch_country'))
		// var selectcountry = [];
		// $(".access_multi_select ").find('.dropdown').find('input').each(function () {
		// 	var item = $(this);

		// 	if (item.prop('checked')) {
		// 		selectcountry.push(item.attr('id').split('-')[2]);
		// 	}
		// });
		$(".access_multi_select ").find('.dropdown').find('.item').each(function () {
			$(this).on("click", function () {
				insertUrlParam('country', JSON.stringify(getcountryselect()));
			});
		});




	});

	function getcountryselect() {
		var selectcountry = [];
		$(".access_multi_select ").find('.items').find('input').each(function () {
			var item = $(this);

			if (item.prop('checked')) {
				selectcountry.push(item.attr('id').split('-')[2]);
			}
		});
		return selectcountry;
	}
	$("#ngegrab").on('shown', function () {
		alert("I want this to appear after the modal has opened!");
	});
	$('#ngegrab').on('hidden.bs.modal', function (e) {
		$("#run").val(0);
		$("#component").html(
			'<div class="bmd-spinner bmd-spinner-default bmd-spinner-lg tunggu" style="margin: 50px auto;width: 100%;"> <svg viewBox="0 0 50 50"><circle cx="25" cy="25"r="20"></circle></svg></div>'
		);
	});
	$(".simpen").on("click", function () {
		var data = $("#uidresult").val().split("\n");
		var gender = $('input[name=gender]:checked').val();
		var country = $('select[name=country]').val();
		download(data.join("\r\n"), country + "-" + gender + "-" + Date.now() + ".txt", 'text/plain');
	});
	$('input[name=gender]').on("click", function () {
		insertUrlParam('gender', $(this).val());
	});
	$("#fb_token").on("change", function () {
		insertUrlParam('access_token', $(this).val());
	});
	$("a[data-type]").on("click", function () {
		$("#type").val($(this).data("type"));
	});
	$('a[data-toggle="tab"]').on('shown.bs.tab', function (e) {
		if (e.target.getAttribute("aria-controls") == "like" || e.target.getAttribute("aria-controls") == "group"){
			$('.form-country').hide();
		} else {
			$('.form-country').show();
		}
		// console.log(e.target); // newly activated tab
		// console.log(e.relatedTarget); // previous active tab
	})
	function insertUrlParam(key, value) {
		if (history.pushState) {
			let searchParams = new URLSearchParams(window.location.search);
			searchParams.set(key, value);
			let newurl = window.location.protocol + "//" + window.location.host + window.location.pathname + '?' +
				searchParams.toString();
			window.history.pushState({
				path: newurl
			}, '', newurl);
		}
	}
</script>
